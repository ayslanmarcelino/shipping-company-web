<div class="col-xs-12 text-center">
  <h4><%= t('.view') %>: <%= @cte.cte_number %></h4>
</div>
<div class="col-xs-12 mb-2">
  <%= link_to :back, class: 'col-xs-3 btn btn-secondary btn-sm  btn-user' do %>
    <i class="fas fa-arrow-left"></i>
    <%= t('.back') %>
  <% end %>
  <% if can?(:destroy, Cte) %>
    <%= link_to cte_path(@cte), method: :delete, class: 'btn btn-sm btn-danger', data: { confirm: "#{t('.delete_confirm')}: #{@cte.cte_number} - #{number_to_currency(@cte.value)}?" } do %>
      <i class="fas fa-trash"></i>
      <%= t('.delete') %>
    <% end %>
  <% end %>
</div>
<div class="card">
  <div class="card-body">
    <div class="row">
      <div class="col-md-3">
        <ul class="nav nav-pills flex-column" id="cardPillVertical" role="tablist">
          <li class="nav-item">
            <a class="nav-link active" id="general-info" href="#general" data-toggle="tab" role="tab" aria-controls="overview" aria-selected="true">
              <%= t('.general') %>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="emitter-info" href="#emitter" data-toggle="tab" role="tab" aria-controls="example" aria-selected="false">
              <%= t('.emitter_info') %>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="client-info" href="#client" data-toggle="tab" role="tab" aria-controls="example" aria-selected="false">
              <%= t('.client') %>
            </a>
          </li>
        </ul>
      </div>
      <div class="col-md-9">
        <div class="tab-content" id="cardPillContentVertical">
          <div class="tab-pane fade show active" id="general" role="tabpanel" aria-labelledby="general-info">
            <table class="table">
              <tr>
                <th><%= t('.cte_id') %></th>
                <td><%= @cte.cte_id %></td>
              </tr>
              <tr>
                <th><%= t('.cte_number') %></th>
                <td><%= @cte.cte_number %></td>
              </tr>
              <tr>
                <th><%= t('.value') %></th>
                <td><%= number_to_currency(@cte.value) %></td>
              </tr>
              <tr>
                <th><%= t('.dt_number') %></th>
                <td>
                <%= link_to truckload_path(@cte.truckload.id) do %>
                  <%= @cte.truckload.dt_number %></td>
                <% end %>
              </tr>
              <tr>
                <th><%= t('.observation') %></th>
                <td><%= @cte.observation %></td>
              </tr>
              <tr>
                <th><%= t('.created_at') %></th>
                <td><%= l(@cte.created_at, format: '%d/%m/%Y às %H:%M') %></td>
              </tr>
              <tr>
                <th><%= t('.updated_at') %></th>
                <td><%= l(@cte.updated_at, format: '%d/%m/%Y às %H:%M') %></td>
              </tr>
              <% if user_owner?(current_user) || user_master?(current_user) %>
                <tr>
                  <th><%= t('.created_by') %></th>
                  <td><%= @cte.user.person.first_name %> <%= @cte.user.person.last_name %></td>
                </tr>
              <% end %>
              <% if user_master?(current_user) %>
                <tr>
                  <th><%= t('.enterprise') %></th>
                  <td><%= @cte.user.enterprise.company_name %></td>
                </tr>
              <% end %>
            </table>
          </div>
          <div class="tab-pane fade" id="emitter" role="tabpanel" aria-labelledby="emitter-info">
            <table class="table">
              <% if @cte.emitted_by_enterprise %>
                <tr>
                  <th><%= t('.emitter') %></th>
                  <td><%= @cte.emitter %></td>
                </tr>
              <% end %>
              <tr>
                <th><%= t('.emitted_at') %></th>
                <td><%= l(@cte.emitted_at, format: :with_full_hour)  %></td>
              </tr>
              <tr>
                <th><%= t('.company_name_emitter') %></th>
                <td><%= @cte.company_name_emitter %></td>
              </tr>
              <tr>
                <th><%= t('.fantasy_name_emitter') %></th>
                <td><%= @cte.fantasy_name_emitter %></td>
              </tr>
              <tr>
                <th><%= t('.document_number_emitter') %></th>
                <td><%= @cte.document_number_emitter&.to_br_cnpj %></td>
              </tr>
              <tr>
                <th><%= t('.state_tax_number_emitter') %></th>
                <td><%= @cte.state_tax_number_emitter %></td>
              </tr>
            </table>
          </div>
          <div class="tab-pane fade" id="client" role="tabpanel" aria-labelledby="client-info">
            <table class="table">
              <tr>
                <th><%= t('.client') %></th>
                <td><%= @cte.truckload.client.company_name %></td>
              </tr>
              <tr>
                <th><%= t('.document_number') %></th>
                <td><%= @cte.truckload.client.document_number.to_br_cnpj %></td>
              </tr>
              <tr>
                <th><%= t('.address_zip_code') %></th>
                <td><%= @cte.truckload.client.address.zip_code %></td>
              </tr>
              <tr>
                <th><%= t('.address_street') %></th>
                <td><%= @cte.truckload.client.address.street %></td>
              </tr>
              <tr>
                <th><%= t('.address_number') %></th>
                <td><%= @cte.truckload.client.address.number %></td>
              </tr>
              <tr>
                <th><%= t('.address_complement') %></th>
                <td><%= @cte.truckload.client.address.complement %></td>
              </tr>
              <tr>
                <th><%= t('.address_neighborhood') %></th>
                <td><%= @cte.truckload.client.address.neighborhood %></td>
              </tr>
              <tr>
                <th><%= t('.address_city') %></th>
                <td><%= @cte.truckload.client.address.city %></td>
              </tr>
              <tr>
                <th><%= t('.address_state') %></th>
                <td><%= @cte.truckload.client.address.state %></td>
              </tr>
              <tr>
                <th><%= t('.address_country') %></th>
                <td><%= @cte.truckload.client.address.country %></td>
              </tr>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
