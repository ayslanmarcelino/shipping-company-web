<div class="d-flex" id="wrapper">
  <div class="border-right" id="sidebar-wrapper" style="background-color: <%= current_user.enterprise.primary_color %>">
    <div class="sidebar-heading text-center">
      <%= image_tag(current_user.enterprise.logo, style: 'height: 70px; max-width: 200px;') if current_user.enterprise.logo.attached? %>
    </div>
    <div class="list-group list-group-flush" style="color: <%= current_user.enterprise.secondary_color %>">
      <%= render partial: 'layouts/components/users' %>
      <% if user_owner?(current_user) || user_master?(current_user) %>
        <%= render partial: 'layouts/components/admins' %>
      <% end %>
      <% if user_master?(current_user) %>
        <%= render partial: 'layouts/components/super_admins' %>
      <% end %>
    </div>
  </div>
  <div id="page-content-wrapper">
    <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
      <button class="btn rounded-circle border-0"
              style="background-color: <%= current_user.enterprise.primary_color %>;
                     color: <%= current_user.enterprise.secondary_color %>;"
              id="menu-toggle">
        <i class="fas fa-bars"></i>
      </button>
      <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <i class="fas fa-user"></i>
            <%= current_user.email %>
          </a>
          <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
            <%= render partial: 'layouts/components/dropdown_options' %>
          </div>
        </li>
      </ul>
    </nav>
    <div class="container-fluid">
      <%= yield %>
    </div>
  </div>
</div>
<script>
  $("#menu-toggle").click(function(e) {
    e.preventDefault();
    $("#wrapper").toggleClass("toggled");
  });
</script>
<% flash.each do |key, value| %>
  <% next if key == 'alert' %>
  <% if key == 'notice' %>
    <div class="text-center alert alert-success">
      <script>
        $.bootstrapGrowl('<%= value %>', {
          type: 'success',
          stackup_spacing: 10,
          width: '100%'
        });
      </script>
    </div>
  <% else %>
    <div class="text-center alert alert-<%= key %>">
      <script>
        $.bootstrapGrowl('<%= value %>', {
          type: '<%= key %>',
          stackup_spacing: 10,
          width: '100%'
        });
      </script>
    </div>
  <% end %>
<% end %>
